---
import Layout from "../../layouts/Layout.astro";
import { languages } from "../../i18n/ui";
import { useTranslations } from "../../i18n/utils";
import { Shield, Zap, CheckCircle, TrendingDown } from "lucide-react";
import PdfCompressor from "../../components/tools/PdfCompressor.astro";

export function getStaticPaths() {
    return [{ params: { lang: "en" } }, { params: { lang: "fr" } }];
}

const { lang } = Astro.params;
const t = useTranslations(lang as keyof typeof languages);

// PDF Compressor labels
const labels = {
    en: {
        uploadTitle: "Compress PDF Files",
        uploadDesc: "Drag & drop PDF files here, or click to select",
        dropTitle: "Drop to Add",
        processing: "Processing...",
        download: "Download",
        downloadAll: "Download All ZIP",
        settings: "Compression Settings",
        quality: "Compression Level",
        grayscale: "Grayscale (B&W)",
        grayscaleDesc: "Converts to black & white for maximum reduction",
        qualityScreen: "Smallest size, low res (72 dpi)",
        qualityEbook: "Best balance of size & quality (150 dpi)",
        qualityPrinter: "High quality for printing (300 dpi)",
        statusOptimizing: "Optimizing PDF structure...",
        statusProcessingPage: "Processing page {current} of {total}...",
        statusError: "Error processing file",
        zipping: "Zipping...",
        footer: "",
        trustBadge:
            "Private & Secure: Works offline. No data leaves your device.",
    },
    fr: {
        uploadTitle: "Compresser des fichiers PDF",
        uploadDesc:
            "Glissez-déposez vos fichiers PDF ici, ou cliquez pour sélectionner",
        dropTitle: "Déposer pour ajouter",
        processing: "Traitement...",
        download: "Télécharger",
        downloadAll: "Tout télécharger (ZIP)",
        settings: "Paramètres de compression",
        quality: "Niveau de compression",
        grayscale: "Niveaux de gris (N&B)",
        grayscaleDesc: "Convertit en noir et blanc pour une réduction maximale",
        qualityScreen: "Taille minimale, basse résolution (72 dpi)",
        qualityEbook: "Meilleur équilibre taille/qualité (150 dpi)",
        qualityPrinter: "Haute qualité pour impression (300 dpi)",
        statusOptimizing: "Optimisation de la structure PDF...",
        statusProcessingPage: "Traitement de la page {current} sur {total}...",
        statusError: "Erreur lors du traitement",
        zipping: "Compression en cours...",
        footer: "",
        trustBadge:
            "Privé & Sécurisé : Fonctionne hors ligne. Vos données restent sur votre appareil.",
    },
};

const currentLabels = labels[lang as "en" | "fr"];

const seo = {
    en: {
        h2: "Private & Secure PDF Compression",
        p1: "Unlike other tools that upload your sensitive documents to a cloud server, <strong>NanoKito PDF Compressor</strong> works 100% in your browser. Your files never leave your device.",
        p2: "We use a 'Visual Compression' technique (Rasterization) which converts document pages into highly optimized images. This is perfect for scanning archives, reducing file size for email, or sharing drafts where editable text is not required.",
    },
    fr: {
        h2: "Compression PDF Privée et Sécurisée",
        p1: "Contrairement aux autres outils qui envoient vos documents sensibles sur un serveur cloud, <strong>le Compresseur PDF NanoKito</strong> fonctionne à 100% dans votre navigateur. Vos fichiers ne quittent jamais votre appareil.",
        p2: "Nous utilisons une technique de 'Compression Visuelle' (Rastérisation) qui convertit les pages du document en images hautement optimisées. C'est parfait pour scanner des archives, réduire la taille des fichiers pour l'email, ou partager des brouillons où le texte éditable n'est pas requis.",
    },
};

const currentSeo = seo[lang as "en" | "fr"];

const pageTitle = lang === "fr" ? "Compresseur PDF" : "PDF Compressor";
const pageDescription =
    lang === "fr"
        ? "Compressez vos fichiers PDF localement en rastérisant les pages. Sans envoi au serveur."
        : "Compress PDF files locally by rasterizing pages. No server uploads.";

const features = {
    en: [
        {
            icon: Zap,
            title: "Zero Latency",
            desc: "No uploading or downloading wait times. The compression happens instantly.",
        },
        {
            icon: Shield,
            title: "Private by Design",
            desc: "Traditional tools upload your bank statements and contracts to a cloud server. We don't. The engine runs entirely on your computer.",
        },
        {
            icon: TrendingDown,
            title: "High Efficiency",
            desc: "Powered by the industrial-strength Ghostscript engine for maximum file size reduction.",
        },
    ],
    fr: [
        {
            icon: Zap,
            title: "Zéro Latence",
            desc: "Pas de temps d'attente. La compression est instantanée.",
        },
        {
            icon: Shield,
            title: "Privé par Design",
            desc: "Tout se passe sur votre ordinateur. Aucun envoi sur le cloud.",
        },
        {
            icon: TrendingDown,
            title: "Haute Efficacité",
            desc: "Propulsé par le moteur Ghostscript pour une réduction maximale.",
        },
    ],
};

const currentFeatures = features[lang as "en" | "fr"];
const ghostscriptText =
    lang === "fr"
        ? "Cet outil utilise un portage WebAssembly de Ghostscript, la référence en traitement PDF, pour garantir la lisibilité de vos documents même à forte compression."
        : "This tool utilizes a WebAssembly port of Ghostscript, the gold standard in PDF processing, to ensure your documents remain readable even at high compression rates.";

const faqs = {
    en: [
        {
            q: "Is it truly secure to compress sensitive documents here?",
            a: "Yes. Unlike most online tools, NanoKito is a <strong>secure PDF compressor</strong> that runs 100% in your browser. Your files never leave your device, eliminating the risk of server data breaches. It's safe for legal, medical, and financial documents.",
        },
        {
            q: "How do you reduce PDF size without uploading?",
            a: "We utilize a sophisticated <strong>WebAssembly (WASM)</strong> port of <strong>Ghostscript</strong>. This allows your browser to perform industrial-grade compression locally. You get the power of desktop software with the convenience of a web tool, making it the ultimate <strong>offline PDF tool</strong>.",
        },
        {
            q: "Will compression lower the document quality?",
            a: "Our <strong>Ghostscript</strong> engine is optimized to remove redundant data and downsample high-resolution images while preserving text clarity. You can choose different quality profiles (Screen, eBook, Printer) to balance between size reduction and visual fidelity.",
        },
        {
            q: "Are there any file size limits?",
            a: "Because the compression engine runs in your browser, performance depends on your device's available RAM. For most modern laptops and phones, files up to 100MB are processed smoothly. Extremely large files might require a computer with more memory.",
        },
        {
            q: "Does this work on Mac, Windows, and Linux?",
            a: "Absolutely. NanoKito is platform-independent. Whether you're on macOS, Windows 11, Linux, or even a Chromebook, you can <strong>reduce PDF size</strong> instantly without installing any software.",
        },
    ],
    fr: [
        {
            q: "Est-ce vraiment sécurisé pour des documents sensibles ?",
            a: "Oui. Contrairement à la plupart des outils en ligne, NanoKito est un <strong>compresseur PDF sécurisé</strong> qui fonctionne à 100% dans votre navigateur. Vos fichiers ne quittent jamais votre appareil, éliminant tout risque de fuite de données. Idéal pour les documents légaux ou médicaux.",
        },
        {
            q: "Comment réduire la taille sans envoyer le fichier ?",
            a: "Nous utilisons un portage <strong>WebAssembly (WASM)</strong> de <strong>Ghostscript</strong>. Cela permet à votre navigateur d'effectuer une compression de niveau industriel localement. C'est l'outil <strong>PDF hors ligne</strong> ultime combinant puissance et confidentialité.",
        },
        {
            q: "La compression réduit-elle la qualité ?",
            a: "Notre moteur <strong>Ghostscript</strong> est optimisé pour supprimer les données redondantes tout en préservant la clarté du texte. Vous pouvez choisir différents profils (Écran, eBook, Impression) pour équilibrer réduction de taille et qualité visuelle.",
        },
        {
            q: "Y a-t-il des limites de taille de fichier ?",
            a: "Comme le moteur tourne dans votre navigateur, la performance dépend de la RAM de votre appareil. Sur la plupart des ordinateurs modernes, les fichiers jusqu'à 100 Mo sont traités sans problème.",
        },
        {
            q: "Cela fonctionne-t-il sur Mac, Windows et Linux ?",
            a: "Absolument. NanoKito est indépendant de la plateforme. Que vous soyez sur macOS, Windows 11, Linux ou Chromebook, vous pouvez <strong>réduire la taille de vos PDF</strong> instantanément sans rien installer.",
        },
    ],
};

const currentFaqs = faqs[lang as "en" | "fr"];
const faqTitle =
    lang === "fr" ? "Foire Aux Questions" : "Frequently Asked Questions";
---

<Layout title={`${pageTitle} | NanoKito`} description={pageDescription}>
    {/* Hero Section - PDF Compressor Focused */}
    <section class="relative py-16 lg:py-24 overflow-hidden">
        {/* Background */}
        <div class="absolute inset-0 -z-10 bg-[var(--color-background)]">
            <div
                class="absolute top-0 -left-4 w-96 h-96 bg-amber-400/30 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"
            >
            </div>
            <div
                class="absolute top-0 -right-4 w-96 h-96 bg-orange-400/30 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"
            >
            </div>
            <div
                class="absolute -bottom-8 left-20 w-96 h-96 bg-yellow-400/30 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"
            >
            </div>
            <div
                class="absolute inset-0 bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:24px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"
            >
            </div>
        </div>

        <div class="container mx-auto px-4 max-w-5xl">
            {/* Header */}
            <div class="text-center mb-12">
                <div
                    class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[var(--color-card)]/80 backdrop-blur-md border border-[var(--color-border)] shadow-sm mb-6"
                >
                    <Shield className="w-4 h-4 text-amber-500" />
                    <span
                        class="text-sm font-medium text-[var(--color-muted-foreground)]"
                        >{t("hero.badge")}</span
                    >
                </div>
                <h1
                    class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter text-[var(--color-foreground)] mb-4"
                >
                    {pageTitle}
                </h1>
                <p
                    class="text-lg text-[var(--color-muted-foreground)] max-w-2xl mx-auto"
                >
                    {pageDescription}
                </p>
            </div>

            {/* PDF Compressor Tool */}
            <PdfCompressor labels={currentLabels} />

            {/* How it Works Section */}
            <div class="mt-24 grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                {
                    currentFeatures.map((feature) => (
                        <div class="bg-[var(--color-card)]/50 backdrop-blur-sm border border-[var(--color-border)] rounded-2xl p-6 hover:bg-[var(--color-card)]/80 transition-all duration-300">
                            <feature.icon className="w-8 h-8 text-amber-500 mb-4" />
                            <h3 class="text-xl font-bold text-[var(--color-foreground)] mb-2">
                                {feature.title}
                            </h3>
                            <p class="text-[var(--color-muted-foreground)] leading-relaxed">
                                {feature.desc}
                            </p>
                        </div>
                    ))
                }
            </div>

            {/* Ghostscript Mention */}
            <div class="mt-16 text-center max-w-3xl mx-auto mb-24">
                <p
                    class="text-lg text-[var(--color-muted-foreground)] leading-relaxed bg-[var(--color-card)]/30 backdrop-blur-sm p-6 rounded-2xl border border-[var(--color-border)] inline-block"
                >
                    {ghostscriptText}
                </p>
            </div>
        </div>
    </section>

    {/* FAQ Section */}
    <section
        class="py-16 lg:py-24 border-t border-[var(--color-border)] relative overflow-hidden"
    >
        {/* Decorative Background Elements */}
        <div class="absolute inset-0 -z-10 bg-[var(--color-background)]">
            <div
                class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-amber-400/20 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"
            >
            </div>
            <div
                class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-red-400/20 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"
            >
            </div>
        </div>

        <div class="container mx-auto px-4 max-w-4xl relative">
            <h2
                class="text-3xl md:text-4xl font-bold text-center text-[var(--color-foreground)] mb-12"
            >
                {faqTitle}
            </h2>
            <div class="space-y-6">
                {
                    currentFaqs.map((faq) => (
                        <div class="bg-[var(--color-card)]/50 backdrop-blur-md rounded-2xl p-6 md:p-8 border border-[var(--color-border)] hover:bg-[var(--color-card)]/80 transition-all duration-300 shadow-sm hover:shadow-md">
                            <h3 class="text-xl font-bold text-[var(--color-foreground)] mb-3">
                                {faq.q}
                            </h3>
                            <p
                                class="text-[var(--color-muted-foreground)] leading-relaxed text-base"
                                set:html={faq.a}
                            />
                        </div>
                    ))
                }
            </div>
        </div>
    </section>
</Layout>

<style>
    .animation-delay-2000 {
        animation-delay: 2s;
    }
    .animation-delay-4000 {
        animation-delay: 4s;
    }
    @keyframes blob {
        0%,
        100% {
            transform: translate(0px, 0px) scale(1);
        }
        33% {
            transform: translate(30px, -50px) scale(1.1);
        }
        66% {
            transform: translate(-20px, 20px) scale(0.9);
        }
    }
    .animate-blob {
        animation: blob 7s infinite;
    }
</style>
